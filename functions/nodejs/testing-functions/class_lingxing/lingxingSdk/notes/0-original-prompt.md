我现在要实现一个抓取领星erp中的订单的操作，领星提供了一个oauth2.0的sdk，用于获取accesstoken和refreshtoken，以及可以发送http请求（put post delete get），那么如果要解耦的设计这个函数，我应该把查询函数，和token获取函数，以怎么样的结构去使用呢，例如，在查询函数里面调用token获取函数好呢，还是另外做一个主函数，在这个主函数中调用token获取函数，获取到token之后，再调用查询函数更好呢，或者有其它更好方法吗，需要符合科学的编程方法 