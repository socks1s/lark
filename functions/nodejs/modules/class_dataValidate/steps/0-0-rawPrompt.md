请你写一个文档，用于梳理一个新函数的开发思路：背景是：我在使用飞书低代码软件，软件的用户会向数据库提交数据，但是在入库之前，我们需要对比提交的数据是否进行过前端的篡改，于是我们需要通过飞书云函数将用户提交的数据进行后端的云验算，验算逻辑是：1.触发：用户编辑了子表or主表，如果编辑了，则触发重算流程，函数内部是这样的，如果用户编辑的是主表，那么根据主表id，使用 batchFindRelatedRecords 函数，将对应的子表全部搜出来，如果编辑的是子表，那么先通过子表的关联主表字段，取出关联主表的id（父记录的id），然后去数据库中，抓取出父记录，然后在根据这个（父记录的id），取出所有 的子记录，这样，不管是编辑子表还是主表，我们可以获取到对应的主表和子表，留着进行备用，2.数据验算环节，我们使用一系列的函数，来试算每个字段是否正确，例如，主表是一个采购单，子表是sku的单价数量小计，一个子表代表一个商品sku，这个商品的sku的单价是多少，数量是多少，商品维度的总价是多少，这个商品维度的总价需要验算，公式就是商品的单价*数量，然后计算得出一个商品维度的总价，这是一行子表的算法，如果将所有子表通通算一遍，就可以得出一个这个采购单的所有商品的总价（采购单维度的总价），然后将计算得出的数据，和用户提交上来的数据，进行对比，将商品维度的总价（云函数验算得出的价格）和每一行商品的总价（用户表单提交的总价）去做对比，另外再把采购单维度的总价也和用户提交的总价对比，当所有需要对比的数据全部对比完成后，开始得出结论：单子是否被前端篡改过（例如通过js手段进行了篡改），如果没有被篡改，则返回一个没被篡改，如果被篡改了，那么返回被篡改，另外需要把被前端篡改的数据进行后端纠错，例如：把商品维度的总价和采购单维度的总价进行字段的重新赋值，强行纠错，纠错完成之后，再将纠错完成的数据，以对象的形式输出，父记录使用json对象输出，子记录列表以json的arrayOfObjects输出，请你以这个逻辑，写成一份开发文档，不用写具体代码，只要讲清楚这个逻辑， modules 文档放在这里，需要新建一个文件夹

todo：
- 如何操作可以使这个函数变的通用，比如，采购单有采购单的验算逻辑，其他单子有其他单子的验算逻辑，如何才可以将这个函数服用，请你讲讲逻辑，不用更新文档，直接自然描述（解法：不同单据类型的验算逻辑通过配置文件定义，而不是硬编码在函数中）
childCalculations: [
      {
        targetField: "小计",
        formula: "单价 * 数量",
        fields: ["单价", "数量"]
      }
    ],
    mainCalculations: [
      {
        targetField: "总价",
        formula: "SUM(子表.小计)",
        aggregationType: "sum",
        sourceField: "小计"
      }
    ]
  },
- 如何计算公式非常复杂，涉及到一个计算结果，等于另一个计算公式的入参，怎么办
- 假设把用户传入函数的多条记录，称为原始记录，那么云函数计算得出的数据，叫做正确记录，那么这个正确记录首先是计算完所有需要计算的字段之后，再开始和原记录进行比对那，还是一边比对一边计算
    推荐：原始记录 → 完整计算 → 正确记录 → 统一比对 → 差异结果
- 原始记录的数据结果是：一条主记录（对象）+多条子记录（记录列表），那么计算的过程中，还在生成最终结果的这个过程，数据结构是怎么样的
- 如果我的计算步骤，不是从子表开始，而是从主表开始的，主表计算到了某个值，再给子表引用，子表再给主表，计算的步骤变来变去的，使用哪种顺序来计算更好？
     对于存在主子表相互依赖的复杂计算场景，多轮迭代计算是最佳选择，它确保了计算的准确性和系统的可扩展性。
